<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head><title>FW4SPL</title><meta name="generator" content="Hovercraft! 1.0 http://regebro.github.com/hovercraft"></meta><meta name="author" content="Flavien Bridault"></meta><meta name="description" content="FW4SPL, a framework for applications based on medical imaging"></meta><meta name="keywords" content="presentation"></meta><link rel="stylesheet" href="css/hovercraft.css" media="all"></link><link rel="stylesheet" href="css/impressConsole.css" media="all"></link><link rel="stylesheet" href="css/highlight.css" media="all"></link><link rel="stylesheet" href="css/presentation.css" media="screen,projection"></link></head><body class="impress-not-supported"><div id="impress" data-transition-duration="1250"><div class="step step-level-1" step="0" id="circle-no-background" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="0" data-y="0" data-z="0"><div class="line-block"><br></br><br></br><br></br></div><h1 id="fw4spl-a-framework-for-applications-based-on-medical-imaging">FW4SPL, a framework for applications based on medical imaging.</h1><p><strong>Johan Moreau</strong></p><p><strong>Flavien Bridault</strong></p><p><em>Barcamp - Strasbourg, 15th December 2015</em></p></div><div class="step step-level-1 square-background" step="1" data-x="2000" data-scale="1.0" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-y="0" data-z="0"><div class="line-block"><br></br><br></br><br></br></div><h1 id="overall-presentation">Overall presentation</h1></div><div class="step step-level-1 text-small" step="2" data-x="2000" data-y="2700" data-rotate-z="90" data-scale="1.2" data-rotate-x="0" data-rotate-y="0" data-z="0"><h1 id="fw4spl">FW4SPL</h1><h2 id="why-a-framework">Why a framework ?</h2><ul><li>Quick development, reuse source code</li><li>Intensive use of open source libraries (boost, Qt, VTK, ITK,...)</li><li>Integrate trainees/students/researchers/partners code</li></ul><h2 id="basics">Basics</h2><ul><li>Builds with CMake - Written in C++ (Python extension)</li><li>Cross-platform : Windows, Linux, MacOSX and Android</li><li>Started in 2004</li><li>OpenSource since 2009 (LGPL license)</li></ul><div class="notes"><ul><li>software/prototype - Windows, OSX, Linux, Android, IOs</li><li>reuse source code</li><li>we don't want people to work on different library versions, with different options,...</li><li>we need to integrate the different applications/fragmented code</li></ul></div></div><div class="step step-level-1 text-small" step="3" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1.2" data-x="2000" data-y="5400" data-z="0"><h1 id="core-features">Core features</h1><h2 id="main-repository">main repository :</h2><ul><li>Basic data (Float, Integer, String, Image, Mesh,... )</li><li>Application(HMI include) configuration available in xml</li><li>2D or 3D widgets synchronization</li><li>Data serialization in xml/json/zip</li><li>System/process memory managment (data dumping)</li><li>2D/3D generic scene (VTK/Qt)</li><li>Embedded python</li><li>Around 15 tutorials</li><li>VR-Render</li></ul><h2 id="others-repositories">others repositories :</h2><ul><li>4D synchronization - timeline</li><li>3D with Ogre, 2D with wxWidgets</li><li>AR with OpenCV, Aruco, ARAM</li><li>Network communication (openIGTLink and dicom with DCMTK)</li><li>OpenNI, Sofa</li></ul></div><div class="step step-level-1 text-small" step="4" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1.2" data-x="2000" data-y="8100" data-z="0"><h1 id="user-features">User features</h1><h2 id="id1">main repository :</h2><ul><li>2D Multi-Planar Reconstruction</li><li>3D meshes with optional 3D orthogonal MPR</li><li>3D volume rendering with editable and transfer func.</li><li>Pre-defined pipeline of GPU shaders</li><li>Measuring tool features and landmarks</li><li>DICOM : CT and MRI, surface segmentation</li><li>VTK : images and meshes (.vtk, .vti, .vtu)</li><li>High-efficiency in-house data format</li><li>Radiological and surgery data management</li></ul><h2 id="id2">others repositories :</h2><ul><li>MPR curved</li><li>DICOM PACS and MIDAS communication</li><li>Tracking, Calibration, Registration, ...</li><li>Video player</li></ul></div><div class="step step-level-1 square-background" step="5" data-rotate-z="0" data-x="4000" data-y="8100" data-rotate-x="0" data-rotate-y="0" data-scale="1.2" data-z="0"><div class="line-block"><br></br><br></br><br></br></div><h1 id="design">Design</h1></div><div class="step step-level-1" step="6" data-rotate-z="0" data-x="5500" data-rotate-x="0" data-rotate-y="0" data-scale="1.2" data-y="8100" data-z="0"><h1 id="classic-object-oriented-approach">Classic object-oriented approach</h1><ul><li>an object (i.e. an image) is represented by a class.</li></ul></div><div class="step step-level-1 centered" step="7" data-x="5500" data-y="8370" data-scale="0.5" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-z="0"><img src="images/Image.png" width="80%"></img></div><div class="step step-level-1" step="8" data-scale="1" data-y="8620" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-x="5500" data-z="0"><ul><li>this class contains all functionalities working on the object (read, write, filter, visualize, ...)</li></ul></div><div class="step step-level-1 centered" step="9" data-y="8870" data-scale="0.5" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-x="5500" data-z="0"><img src="images/Image04.png" width="80%"></img></div><div class="step step-level-1" step="10" data-scale="1" data-x="5500" data-y="9870" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-z="0"><h1 id="limits-of-this-approach">Limits of this approach</h1><ul><li>Too many methods in the class, hard to maintain</li><li>Many dependencies required even if you only need a single method.</li><li>Collaborative work harder</li></ul><h2 id="solution">Solution</h2><ul><li>Split data and functions</li></ul><div class="notes"><ul><li>Too many functions, if team continue to add functions</li><li>Many dependencies required (itk,vtk,qt,dcmtk,...) even if you just need  to crop an image</li><li>Everyone work on the same file</li></ul></div></div><div class="step step-level-1" step="11" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="5500" data-y="10870" data-z="0"><h1 id="object-service">Object/Service</h1><ul><li>Only one functionality (Read, Crop, Visualize...)</li><li>Class of services (IReader, IOperator, IVisu)</li><li>State pattern</li></ul><div class="notes"><ul><li>to this end, we use to concept of service</li><li>we can observe that for each process, we always have to repeat the same execution pattern, life cycle, configure, then initialize, update and stop</li><li>update can be repeated</li></ul></div></div><div class="step step-level-1 centered" step="12" data-x="5500" data-y="11270" data-scale="0.8" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-z="0"><img src="images/state.png"></img><div class="notes"><ul><li>transitions, on ne peut pas passer de configure &#xE0; stop</li><li>We need to store data into it</li></ul></div></div><div class="step step-level-1 centered" step="13" data-scale="1" data-x="5500" data-y="12070" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-z="0"><p><em>Service approach example</em></p><img src="images/IService02.png" width="120%"></img><div class="notes"><ul><li>Common interface 4 methods</li><li>sub-classes for each type</li><li>one service for each functionality</li></ul></div></div><div class="step step-level-1" step="14" data-scale="0.15" data-x="5450" data-y="12430" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-z="0"><h1 id="dcmtkreadersrv">DcmtkReaderSrv</h1><ul><li>configure() : verify if url is ok</li><li>start() : do nothing</li><li>update() : read the data ( equivalent to <strong>readImageFromPacsWithDcmtk()</strong> )</li><li>stop() : do nothing</li></ul></div><div class="step step-level-1" step="15" data-x="5615" data-y="12430" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="0.15" data-z="0"><h1 id="itkcropoperatorsrv">ItkCropOperatorSrv</h1><ul><li>configure() : verify if the cropping region is valid</li><li>start() : do nothing</li><li>update() : compute the cropping on image and set the new data (equivalent to <strong>cropImageWithItk</strong> )</li><li>stop() : do nothing</li></ul></div><div class="step step-level-1" step="16" data-x="5975" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="0.15" data-y="12430" data-z="0"><h1 id="vtkqtvisusrv">VtkQtVisuSrv</h1><ul><li>configure() : verify if the screen support this size</li><li>start() : initialize Qt frame and vtk pipeline and show the frame</li><li>update() : check the buffer, if it has changed, refresh the vtk pipeline</li><li>stop() : destroy vtk pipeline and uninitialize Qt frame.</li></ul><div class="notes"><ul><li>configure() : verify if the screen support this size</li><li>start() : initialize Qt frame and vtk pipeline and show the frame (image is not shown if image buffer is null )</li><li>update() : check if the buffer has be changed, if true, refresh the vtk pipeline to show negato</li><li>stop() : destroy vtk pipeline and uninitialize Qt frame.</li></ul></div></div><div class="step step-level-1" step="17" data-x="5975" data-y="13030" data-scale="1" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-z="0"><h1 id="application-description-in-xml">Application description in XML</h1><ul><li>Objects and services classes are registered dynamically</li><li>Instances are created by a factory</li><li>Application launcher reads a XML configuration file</li></ul></div><div class="step step-level-1" step="18" data-x="7475" data-y="13030" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-z="0"><h1 id="communication">Communication</h1><ul><li><dl><dt><em>Signals/Slots</em> (inspired by Qt)</dt><dd><ul><li>Data -&gt; Service</li><li>Service &lt;-&gt; Service</li></ul></dd></dl></li><li><dl><dt>Slot call</dt><dd><ul><li>synchronous</li><li>asynchronous</li></ul></dd></dl></li></ul><img src="images/sigslot.png" width="100%"></img></div><div class="step step-level-1" step="19" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-x="8975" data-y="13030" data-z="0"><h1 id="component-in-fw4spl">Component in FW4SPL</h1><ul><li>Also called <em>Bundle</em> (in OSGi)</li><li>Dynamic library, loaded on demand</li><li>Group services, by theme and/or by dependency</li><li>Examples: <strong>ioVTK</strong>, <strong>uiImageQt</strong></li></ul><h2 id="content-of-a-bundle">Content of a Bundle</h2><ul><li>Xml description file : <strong>plugin.xml</strong></li><li>Library binary ( .so, .dll, .dylib)</li><li>Other shared resources ( icons, sounds, ... )</li></ul><div class="notes"><ul><li>When a Bundle is compiled</li><li>Xml description file ( plugin.xml ) to describe the content of the dynamic library</li></ul></div></div><div class="step step-level-1" step="20" data-x="8975" data-y="14030" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-z="0"><h1 id="component-based-approach">Component based approach</h1><h2 id="benefits">Benefits</h2><ul><li>Code reuse without recompiling</li><li>Improve external dependencies management (VTK, ITK, Qt,...)</li><li>Easier support</li><li>Easier collaborative work</li></ul><h2 id="examples">Examples</h2><ul><li>Eclipse,...</li></ul><div class="notes"><ul><li>Code split</li><li>Reuse code in another application, without recompiling your program, even no link of your application against a library</li><li>Easier support EXAMPLE correction of bug</li></ul></div></div><div class="step step-level-1" step="21" data-x="10475" data-y="14030" data-rotate-x="0" data-rotate-y="0" data-rotate-z="0" data-scale="1" data-z="0"><h1 id="discussion">Discussion</h1><p><em>Services and components</em></p><p><strong>Cons</strong></p><ul><li>Think design differently</li><li>Need to write a new service for each new functionality</li></ul><p><strong>Pros</strong></p><ul><li>Code reuse, and you pick only what you need</li><li>Far less coupling !</li><li>No need for a public and private API</li></ul></div><div class="step step-level-1 text-small" step="22" data-rotate-z="90" data-x="10475" data-y="15530" data-rotate-x="0" data-rotate-y="0" data-scale="1" data-z="0"><h1 id="demonstration">Demonstration</h1><video width="640" height="360" controls>
   <source src="https://www.flickr.com/video_download.gne?id=23732849331" >
   Your browser does not support the video tag.
</video></div><div class="step step-level-1" step="23" data-y="15530" data-x="9975" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-z="0"><video width="640" height="360" controls>
   <source src="https://www.flickr.com/video_download.gne?id=23187154854" >
   Your browser does not support the video tag.
</video></div><div class="step step-level-1" step="24" data-x="9525" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="15530" data-z="0"><video width="640" height="360" controls>
   <source src="https://www.flickr.com/video_download.gne?id=23519652480" >
   Your browser does not support the video tag.
</video></div><div class="step step-level-1" step="25" data-x="9075" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="15530" data-z="0"><video width="640" height="360" controls>
   <source src="https://www.flickr.com/video_download.gne?id=23707101372" >
   Your browser does not support the video tag.
</video></div><div class="step step-level-1" step="26" data-x="8625" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="15530" data-z="0"><video width="640" height="360" controls>
   <source src="https://www.flickr.com/video_download.gne?id=23789374406" >
   Your browser does not support the video tag.
</video></div><div class="step step-level-1" step="27" data-x="8175" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-y="15530" data-z="0"><video width="640" height="360" controls>
   <source src="https://www.flickr.com/video_download.gne?id=23815450025" >
   Your browser does not support the video tag.
</video></div><div class="step step-level-1 square-background" step="28" data-x="9675" data-y="16530" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-z="0"><div class="line-block"><br></br><br></br><br></br></div><h1 id="getting-started">Getting started</h1></div><div class="step step-level-1 text-small" step="29" data-x="9675" data-y="18030" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-z="0"><h1 id="id3">Getting started</h1><h2 id="id4">Basics</h2><ul><li>Le GitHub <a href="http://fw4spl-org.github.io">http://fw4spl-org.github.io</a></li><li>Documentation <a href="http://fw4spl-doc.readthedocs.org">http://fw4spl-doc.readthedocs.org</a></li><li>Developper blog <a href="http://fw4spl-org.github.io/fw4spl-blog">http://fw4spl-org.github.io/fw4spl-blog</a></li><li>#fw4spl on irc.freenode.net and <a href="http://fw4spl.slack.com">http://fw4spl.slack.com</a></li></ul><h2 id="source">Source</h2><ul><li>Github : <a href="https://github.com/fw4spl-org">https://github.com/fw4spl-org</a></li><li>BitBucket : <a href="https://bitbucket.org/fw4splorg">https://bitbucket.org/fw4splorg</a></li><li>Do not use the obsolete googlecode page !!!</li><li>Current stable version : 0.10.1 (used in CE/FDA Application)</li><li>Current development version : 0.10.2 (Strongly advised for a new software)</li></ul><h2 id="others">Others</h2><ul><li>Repositories : fw4spl, fw4spl-ext, fw4spl-ar, fw4spl-ogre, ...</li><li>Debian Integration (Previous stable version 0.9.2)</li></ul></div><div class="step step-level-1" step="30" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="9675" data-y="19530" data-z="0"><img src="images/statF4S.png" width="105%"></img></div><div class="step step-level-1 text-small" step="31" data-x="9675" data-y="21030" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-z="0"><h1 id="future">Future</h1><ul><li>API and code <strong>simplification</strong></li><li>Documentation improvement (Enhanced ISO13485 support)</li><li><strong>Installation improvement</strong> (repository cloning, docker, ...)</li><li>API <strong>stabilisation</strong> with roadmap (1.0 after 0.10 or 0.11 ?)</li><li>Enhanced C++11 support (C++14 ?)</li><li>Enhanced Embedded python</li><li>Enhanced unittests</li><li>Support for <strong>web</strong> development</li><li>User interface markup language</li><li>New threading and GPU technics</li></ul></div><div class="step step-level-1 centered" step="32" data-y="22530" data-rotate-x="0" data-rotate-y="0" data-rotate-z="90" data-scale="1" data-x="9675" data-z="0"><h1 id="thank-you">Thank you !</h1><p>fw4spl at gmail.com</p><p>johan.moreau at ircad.fr</p><p>fbridault at ircad.fr</p><div class="line-block"><br></br><br></br></div><blockquote><p>Presentation made with <a href="https://github.com/regebro/hovercraft">Hovercraft</a></p></blockquote></div></div><div id="hovercraft-help" class="hide"><table><tr><th>Space</th><td>Forward</td></tr><tr><th>Right, Down, Page Down</th><td>Next slide</td></tr><tr><th>Left, Up, Page Up</th><td>Previous slide</td></tr><tr><th>P</th><td>Open presenter console</td></tr><tr><th>H</th><td>Toggle this help</td></tr></table></div><script type="text/javascript" src="js/impress.js"></script><script type="text/javascript" src="js/impressConsole.js"></script><script type="text/javascript" src="js/hovercraft.js"></script></body></html>